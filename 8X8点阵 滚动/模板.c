#include <reg52.h>
#include <intrins.h>
typedef unsigned int u16;
typedef unsigned char u8;
sbit RCLK_=P3^5;
sbit SRCLK=P3^6;
sbit SER=P3^4;
void delay(u16 i)
{
	while(i--);
}
void hc595byte(u8 dat)
{
	u16 i;
	RCLK_=0;
	SRCLK=0;
	for(i=0;i<8;i++)   //一位位将data送入移位寄存器，先高位，后低位
	{
		SER=dat>>7;   //取最高位
		dat=dat<<1;   //移去最高位，最低位补0
		SRCLK=1;   //移位寄存器，产生一个上升沿，将SER的数据移入移位寄存器
		_nop_();   //延时
		_nop_();
		SRCLK=0;   //归零，以便再次产生上升沿
	}
	RCLK_=1;   //存储寄存器产生上升沿，将SER已移入的数据送给输出端
}
u8 P0duan[]={0x7f,0xbf,0xdf,0xef,0xf7,0xfb,0xfd,0xfe};
u8 a[]={0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00};
u8 b[]={0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3c};
u8 c[]={0x00,0x00,0x00,0x00,0x00,0x00,0x3c,0x42};
u8 d[]={0x00,0x00,0x00,0x00,0x00,0x3c,0x42,0x81};
u8 e[]={0x00,0x00,0x00,0x00,0x3c,0x42,0x81,0x81};
u8 f[]={0x00,0x00,0x00,0x3c,0x42,0x81,0x81,0x42};
u8 g[]={0x00,0x00,0x3c,0x42,0x81,0x81,0x42,0x3c};
u8 h[]={0x00,0x3c,0x42,0x81,0x81,0x42,0x3c,0x00};
u8 i[]={0x3c,0x42,0x81,0x81,0x42,0x3c,0x00,0x00};
u8 j[]={0x42,0x81,0x81,0x42,0x3c,0x00,0x00,0x00};
u8 k[]={0x81,0x81,0x42,0x3c,0x00,0x00,0x00,0x00};
u8 l[]={0x81,0x42,0x3c,0x00,0x00,0x00,0x00,0x00};
u8 m[]={0x42,0x3c,0x00,0x00,0x00,0x00,0x00,0x00};
u8 n[]={0x3c,0x00,0x00,0x00,0x00,0x00,0x00,0x00};
void display(u8 a[])
{
	u16 i,j;
	for(j=0;j<30;j++)
	{
		for(i=0;i<8;i++)
		{
       P0=P0duan[i];
			 hc595byte(a[i]);
			 delay(100);
			 hc595byte(0x00);
		}
	}
}
void main()
{
	u16 z;
  while(1)
	{
		for(z=0;z<14;z++)
		{
			switch(z)
			{
				case(0):display(a);break;
				case(1):display(b);break;
				case(2):display(c);break;
				case(3):display(d);break;
				case(4):display(e);break;
				case(5):display(f);break;
				case(6):display(g);break;
				case(7):display(h);break;
				case(8):display(i);break;
				case(9):display(j);break;
				case(10):display(k);break;
				case(11):display(l);break;
				case(12):display(m);break;
				case(13):display(n);break;
			}
		}
	}
}







